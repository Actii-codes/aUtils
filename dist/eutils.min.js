/**
* A utilities class
* @class EUtilsSingleton
* @license EUtils does not have a license at this time. For licensing contact the author
* @author https://github.com/doubleactii
* Copyright (c) 2023 Evitca Studio
*/ class EUtilsSingleton{static version="1.0.0";constructor(){this.transitions={},this.storedIDs=[]}decimalRand(t,r,e=1){let i=Number((Math.random()*(t-r)+r).toFixed(e));return i>=1?Math.floor(i):i}getPercentage(t,r){return 100*t/r}clamp(t,r=0,e=1){return Math.max(r,Math.min(t,e))}lerp(t,r,e){return(1-e)*t+e*r}flooredLerp(t,r,e){return Math.floor(this.lerp(t,r,e))}round(t,r=1){return Math.round(r*t)/r}normalize(t,r,e){return e-r==0?1:(t-r)/(e-r)}within(t,r,e){return t>=r&&t<=e}formatNumber(t){return t.toFixed().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}generateID(t=7){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=function(){let e="";for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},i=e();for(;this.storedIDs.includes(i);)i=e();return this.storedIDs.push(i),i}decimalToHex(t,r=6){return"#"+(t+Math.pow(16,r)).toString(16).slice(-r).toUpperCase()}addIntensity(t,r){let e=this.grabColor(t).rgbArray,i=e[0],o=e[1],n=e[2],s=0,a=0,l=0,c=0===i&&0===o&&0===n;return(i||c)&&(s=i+Math.floor(255*r/100)),(o||c)&&(a=o+Math.floor(255*r/100)),(n||c)&&(l=n+Math.floor(255*r/100)),this.grabColor(this.clamp(s,0,255),this.clamp(a,0,255),this.clamp(l,0,255)).hex}grabColor(t=this.getRandomColor(),r,e){let i,o,n,s;if("number"==typeof t&&"number"==typeof r&&"number"==typeof e){o=this.clamp(t,0,255),n=this.clamp(r,0,255),s=this.clamp(e,0,255);let a=function(t){return t.toString(16).padStart(2,"0")};i="#"+[o,n,s].map(a).join("")}else"number"==typeof t&&(t=this.decimalToHex(t)),i=t,3===(t=t.replace("#","")).length&&(t=t.replace(RegExp("(.)","g"),"$1$1")),t=t.match(RegExp("..","g")),o=this.clamp(parseInt(t[0],16),0,255),n=this.clamp(parseInt(t[1],16),0,255),s=this.clamp(parseInt(t[2],16),0,255);return{hex:i.toLowerCase(),hexTagless:i.replace("#","").toLowerCase(),rgb:"rgb("+o+","+n+","+s+")",rgbArray:[o,n,s],rgbObject:{r:o,g:n,b:s},rgbNormal:[Math.round(o/255*100)/100,Math.round(n/255*100)/100,Math.round(s/255*100)/100],decimal:o<<16|n<<8|s}}getRandomColor(){let t="#";for(let r=0;r<6;r++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}getRandomColorBetween(t=Math.random(),r,e){return this.flooredLerp(t,this.grabColor(r).decimal,this.grabColor(e).decimal)}transitionColor(t,r="#000",e="#fff",i=1e3,o,n){if(!globalThis.window)return;let s="function"==typeof o?o:null,a="function"==typeof n?n:null,l,c,h;t?(l=t.id?t.id:this.generateID(),c="GeneratedParticle"===t.type,h="object"==typeof t.color&&t.color.constructor===Object,this.transitions[l]&&this.cancelTransitionColor(l)):l=this.generateID(),this.transitions[l]={duration:i,timeTracker:c?t.info.lifetime:0};let $=this.grabColor(r).rgbArray,d=this.grabColor(e).rgbArray,m=this;return this.transitions[l].step=r=>{if(m.transitions[l]){if(c){if(t.info){if(t.info.owner&&t.info.owner.settings.paused)return}else{m.transitions[l]&&this.cancelTransitionColor(l);return}}let e=r;m.transitions[l].lastTime||(m.transitions[l].lastTime=e);let o=e-m.transitions[l].lastTime;m.transitions[l].timeTracker+=o;let n=Math.min(m.transitions[l].timeTracker/m.transitions[l].duration,1),g=parseInt(m.lerp($[0],d[0],n),10),u=parseInt(m.lerp($[1],d[1],n),10),f=parseInt(m.lerp($[2],d[2],n),10),p=m.grabColor(g,u,f);if(s&&s(p),t&&(h?(t.color.tint=p.decimal,t.color=t.color):t.color=p.hex),n>=1||m.transitions[l].timeTracker>=i){m.transitions[l]&&this.cancelTransitionColor(l),a&&a(p);return}m.transitions[l].req=globalThis.requestAnimationFrame(m.transitions[l].step),m.transitions[l].lastTime=e}},this.transitions[l].req=globalThis.requestAnimationFrame(this.transitions[l].step),l}cancelTransitionColor(t){this.transitions[t]&&(globalThis.cancelAnimationFrame(this.transitions[t].req),delete this.transitions[t])}getPointRotated(t,r,e){let i=t.x+t.width*t.anchor.x,o=t.y+t.height*t.anchor.y,n=e.x-i,s=e.y-o;return{x:n*Math.cos(r)- -(s*Math.sin(r))+i,y:-(n*Math.sin(r))+s*Math.cos(r)+o}}getPointsOfRotatedRect(t,r){let e=this.getPointRotated(t,r,{x:t.x,y:t.y}),i=this.getPointRotated(t,r,{x:t.x+t.width,y:t.y}),o=this.getPointRotated(t,r,{x:t.x,y:t.y+t.height}),n=this.getPointRotated(t,r,{x:t.x+t.width,y:t.y+t.height}),s=this.getPointRotated(t,r,{x:t.x+t.width/2,y:t.y+t.height/2});return{tl:e,tr:i,bl:o,br:n,center:s}}}console.log("%cEUtils.js: âœ… EUtils.js@"+EUtilsSingleton.version,"font-family:arial;");export const EUtils=new EUtilsSingleton;