/**
* A utilities class
* @class EUtilsSingleton
* @license EUtils does not have a license at this time. For licensing contact the author
* @author https://github.com/doubleactii
* Copyright (c) 2023 Evitca Studio
*/
class t{static version="1.0.0";constructor(){this.transitions={},this.storedIDs=[]}decimalRand(t,r,e=1){return 1<=(t=Number((Math.random()*(t-r)+r).toFixed(e)))?Math.floor(t):t}getPercentage(t,r){return 100*t/r}clamp(t,r=0,e=1){return Math.max(r,Math.min(t,e))}lerp(t,r,e){return(1-e)*t+e*r}flooredLerp(t,r,e){return Math.floor(this.lerp(t,r,e))}round(t,r=1){return Math.round(r*t)/r}normalize(t,r,e){return e-r==0?1:(t-r)/(e-r)}within(t,r,e){return r<=t&&t<=e}formatNumber(t){return t.toFixed().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}generateID(e=7){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function t(){let r="";for(let t=0;t<e;t++)r+=o.charAt(Math.floor(Math.random()*o.length));return r}let r=t();for(;this.storedIDs.includes(r);)r=t();return this.storedIDs.push(r),r}decimalToHex(t,r=6){return"#"+(t+Math.pow(16,r)).toString(16).slice(-r).toUpperCase()}addIntensity(t,r){var e=(t=this.grabColor(t).rgbArray)[0],o=t[1],t=t[2];let i=0,n=0,a=0;var s=0===e&&0===o&&0===t;return(e||s)&&(i=e+Math.floor(255*r/100)),(o||s)&&(n=o+Math.floor(255*r/100)),(t||s)&&(a=t+Math.floor(255*r/100)),this.grabColor(this.clamp(i,0,255),this.clamp(n,0,255),this.clamp(a,0,255)).hex}grabColor(t=this.getRandomColor(),r,e){let o,i,n,a;return"number"==typeof t&&"number"==typeof r&&"number"==typeof e?(i=this.clamp(t,0,255),n=this.clamp(r,0,255),a=this.clamp(e,0,255),o="#"+[i,n,a].map(function(t){return t.toString(16).padStart(2,"0")}).join("")):("number"==typeof t&&(t=this.decimalToHex(t)),t=(t=3===(t=(o=t).replace("#","")).length?t.replace(new RegExp("(.)","g"),"$1$1"):t).match(new RegExp("..","g")),i=this.clamp(parseInt(t[0],16),0,255),n=this.clamp(parseInt(t[1],16),0,255),a=this.clamp(parseInt(t[2],16),0,255)),{hex:o.toLowerCase(),hexTagless:o.replace("#","").toLowerCase(),rgb:"rgb("+i+","+n+","+a+")",rgbArray:[i,n,a],rgbObject:{r:i,g:n,b:a},rgbNormal:[Math.round(i/255*100)/100,Math.round(n/255*100)/100,Math.round(a/255*100)/100],decimal:i<<16|n<<8|a}}getRandomColor(){let r="#";for(let t=0;t<6;t++)r+="0123456789ABCDEF"[Math.floor(16*Math.random())];return r}getRandomColorBetween(t=Math.random(),r,e){return this.flooredLerp(t,this.grabColor(r).decimal,this.grabColor(e).decimal)}transitionColor(l,t="#000",r="#fff",h=1e3,e,o){if(globalThis.window){const c="function"==typeof e?e:null,m="function"==typeof o?o:null;let n,a,s;l?(n=l.id||this.generateID(),a="GeneratedParticle"===l.type,s="object"==typeof l.color&&l.color.constructor===Object,this.transitions[n]&&this.cancelTransitionColor(n)):n=this.generateID(),this.transitions[n]={duration:h,timeTracker:a?l.info.lifetime:0};const d=this.grabColor(t).rgbArray,g=this.grabColor(r).rgbArray,p=this;return this.transitions[n].step=t=>{if(p.transitions[n]){if(a){if(!l.info)return void(p.transitions[n]&&this.cancelTransitionColor(n));if(l.info.owner&&l.info.owner.settings.paused)return}p.transitions[n].lastTime||(p.transitions[n].lastTime=t);var r=t-p.transitions[n].lastTime,r=(p.transitions[n].timeTracker+=r,Math.min(p.transitions[n].timeTracker/p.transitions[n].duration,1)),e=parseInt(p.lerp(d[0],g[0],r),10),o=parseInt(p.lerp(d[1],g[1],r),10),i=parseInt(p.lerp(d[2],g[2],r),10),e=p.grabColor(e,o,i);c&&c(e),l&&(s?(l.color.tint=e.decimal,l.color=l.color):l.color=e.hex),1<=r||p.transitions[n].timeTracker>=h?(p.transitions[n]&&this.cancelTransitionColor(n),m&&m(e)):(p.transitions[n].req=globalThis.requestAnimationFrame(p.transitions[n].step),p.transitions[n].lastTime=t)}},this.transitions[n].req=globalThis.requestAnimationFrame(this.transitions[n].step),n}}cancelTransitionColor(t){this.transitions[t]&&(globalThis.cancelAnimationFrame(this.transitions[t].req),delete this.transitions[t])}getPointRotated(t,r,e){var o=t.x+t.width*t.anchor.x,t=t.y+t.height*t.anchor.y,i=e.x-o,e=e.y-t;return{x:i*Math.cos(r)-e*-Math.sin(r)+o,y:i*-Math.sin(r)+e*Math.cos(r)+t}}getPointsOfRotatedRect(t,r){return{tl:this.getPointRotated(t,r,{x:t.x,y:t.y}),tr:this.getPointRotated(t,r,{x:t.x+t.width,y:t.y}),bl:this.getPointRotated(t,r,{x:t.x,y:t.y+t.height}),br:this.getPointRotated(t,r,{x:t.x+t.width,y:t.y+t.height}),center:this.getPointRotated(t,r,{x:t.x+t.width/2,y:t.y+t.height/2})}}}console.log("%cEUtils.js: âœ… EUtils.js@"+t.version,"font-family:arial;");var r=new t;export{r as EUtils};