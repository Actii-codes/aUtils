/**
* A utilities class
* @class EUtilsSingleton
* @license EUtils does not have a license at this time. For licensing contact the author
* @author https://github.com/doubleactii
* Copyright (c) 2023 Evitca Studio
*/
var t=new class{static version="1.0.0";constructor(){this.transitions={},this.storedIDs=[]}decimalRand(t,r,e=1){t=Number((Math.random()*(t-r)+r).toFixed(e));return 1<=t?Math.floor(t):t}rand(t,r){t=Number(Math.random()*(t-r)+r);return Math.round(t)}getPercentage(t,r){return 100*t/r}clamp(t,r=0,e=1){return Math.max(r,Math.min(t,e))}lerp(t,r,e){return(1-e)*t+e*r}flooredLerp(t,r,e){return Math.floor(this.lerp(t,r,e))}round(t,r=1){return Math.round(r*t)/r}normalize(t,r,e){return e-r==0?1:(t-r)/(e-r)}within(t,r,e){return r<=t&&t<=e}formatIntegerWithCommas(t){return t.toFixed().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}degreesToRadians(t){return t*(Math.PI/180)}radiansToDegrees(t){return t*(180/Math.PI)}pick(t){return t[Math.floor(Math.random()*t.length)]}prob(t){return!(t<=0)&&(100<=t||Math.floor(100*Math.random())+1<=t)}getInverseDir(t){switch(t){case"north":return"south";case"south":return"north";case"east":return"west";case"west":return"east";case"northeast":return"southwest";case"northwest":return"southeast";case"southeast":return"northwest";case"southwest":return"northeast";default:console.error(`The direction ${t} is not supported.`)}}getAngleFromDir(t){switch(t){case"north":return Math.PI/2;case"south":return 3*Math.PI/2;case"east":return 2*Math.PI;case"west":return Math.PI;case"northwest":return 3*Math.PI/4;case"northeast":return Math.PI/4;case"southwest":return 5*Math.PI/4;case"southeast":return 7*Math.PI/4;default:console.error(`The direction ${t} is not supported.`)}}generateID(e=7){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function t(){let r="";for(let t=0;t<e;t++)r+=o.charAt(Math.floor(Math.random()*o.length));return r}let r=t();for(;this.storedIDs.includes(r);)r=t();return this.storedIDs.push(r),r}decimalToHex(t,r=6){return"#"+(t+Math.pow(16,r)).toString(16).slice(-r).toUpperCase()}addIntensity(t,r){var t=this.grabColor(t).rgbArray,e=t[0],o=t[1],t=t[2];let n=0,a=0,s=0;var i=0===e&&0===o&&0===t;return(e||i)&&(n=e+Math.floor(255*r/100)),(o||i)&&(a=o+Math.floor(255*r/100)),(t||i)&&(s=t+Math.floor(255*r/100)),this.grabColor(this.clamp(n,0,255),this.clamp(a,0,255),this.clamp(s,0,255)).hex}grabColor(t=this.getRandomColor(),r,e){let o,n,a,s;return"number"==typeof t&&"number"==typeof r&&"number"==typeof e?(n=this.clamp(t,0,255),a=this.clamp(r,0,255),s=this.clamp(e,0,255),o="#"+[n,a,s].map(function(t){return t.toString(16).padStart(2,"0")}).join("")):("number"==typeof t&&(t=this.decimalToHex(t)),t=(t=3===(t=(o=t).replace("#","")).length?t.replace(new RegExp("(.)","g"),"$1$1"):t).match(new RegExp("..","g")),n=this.clamp(parseInt(t[0],16),0,255),a=this.clamp(parseInt(t[1],16),0,255),s=this.clamp(parseInt(t[2],16),0,255)),{hex:o.toLowerCase(),hexTagless:o.replace("#","").toLowerCase(),rgb:"rgb("+n+","+a+","+s+")",rgbArray:[n,a,s],rgbObject:{r:n,g:a,b:s},rgbNormal:[Math.round(n/255*100)/100,Math.round(a/255*100)/100,Math.round(s/255*100)/100],decimal:n<<16|a<<8|s}}getRandomColor(){let r="#";for(let t=0;t<6;t++)r+="0123456789ABCDEF"[Math.floor(16*Math.random())];return r}getRandomColorBetween(t,r,e=.5){return this.flooredLerp(this.grabColor(t).decimal,this.grabColor(r).decimal,e)}transitionColor(h,t="#000",r="#fff",l=1e3,e,o){if(globalThis.window){const c="function"==typeof e?e:null,u="function"==typeof o?o:null;let a,s,i;h?(a=h.id||this.generateID(),s="GeneratedParticle"===h.type,i="object"==typeof h.color&&h.color.constructor===Object,this.transitions[a]&&this.cancelTransitionColor(a)):a=this.generateID(),this.transitions[a]={duration:l,timeTracker:s?h.info.lifetime:0};const d=this.grabColor(t).rgbArray,g=this.grabColor(r).rgbArray,m=this;return this.transitions[a].step=t=>{if(m.transitions[a]){if(s){if(!h.info)return void(m.transitions[a]&&this.cancelTransitionColor(a));if(h.info.owner&&h.info.owner.settings.paused)return}m.transitions[a].lastTime||(m.transitions[a].lastTime=t);var r=t-m.transitions[a].lastTime,r=(m.transitions[a].timeTracker+=r,Math.min(m.transitions[a].timeTracker/m.transitions[a].duration,1)),e=parseInt(m.lerp(d[0],g[0],r),10),o=parseInt(m.lerp(d[1],g[1],r),10),n=parseInt(m.lerp(d[2],g[2],r),10),e=m.grabColor(e,o,n);c&&c(e),h&&(i?(h.color.tint=e.decimal,h.color=h.color):h.color=e.hex),1<=r||m.transitions[a].timeTracker>=l?(m.transitions[a]&&this.cancelTransitionColor(a),u&&u(e)):(m.transitions[a].req=globalThis.requestAnimationFrame(m.transitions[a].step),m.transitions[a].lastTime=t)}},this.transitions[a].req=globalThis.requestAnimationFrame(this.transitions[a].step),a}}cancelTransitionColor(t){this.transitions[t]&&(globalThis.cancelAnimationFrame(this.transitions[t].req),delete this.transitions[t])}getPointRotated(t,r,e){var o=t.x+t.width*("object"==typeof t.anchor&&t.anchor.x?t.anchor.x:.5),t=t.y+t.height*("object"==typeof t.anchor&&t.anchor.y?t.anchor.y:.5),n=e.x-o,e=e.y-t;return{x:n*Math.cos(r)-e*-Math.sin(r)+o,y:n*-Math.sin(r)+e*Math.cos(r)+t}}getPointsOfRotatedRect(t,r){return{tl:this.getPointRotated(t,r,{x:t.x,y:t.y}),tr:this.getPointRotated(t,r,{x:t.x+t.width,y:t.y}),bl:this.getPointRotated(t,r,{x:t.x,y:t.y+t.height}),br:this.getPointRotated(t,r,{x:t.x+t.width,y:t.y+t.height}),center:this.getPointRotated(t,r,{x:t.x+t.width/2,y:t.y+t.height/2})}}};export{t as EUtils};